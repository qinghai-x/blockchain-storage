# 修复 Electron Builder 构建问题

## 问题原因

electron-builder 在构建时需要下载 Electron 二进制文件，但镜像 URL 格式不正确。

## 解决方案

### 方法一：使用环境变量（推荐）

在构建前设置环境变量：

```powershell
# 设置 Electron 镜像（electron-builder 使用）
$env:ELECTRON_MIRROR = "https://npmmirror.com/mirrors/electron/"

# 然后构建
npm run electron:build:win
```

### 方法二：在 package.json 中配置（已修复）

我已经在 `package.json` 中添加了 `electronDownload.mirror` 配置，现在可以直接构建：

```bash
npm run electron:build:win
```

### 方法三：使用 .npmrc 文件

在项目根目录创建 `.npmrc` 文件：

```
electron_mirror=https://npmmirror.com/mirrors/electron/
```

## 重新构建

修复配置后，重新运行构建命令：

```bash
npm run electron:build:win
```

## 如果还是失败

### 检查网络连接

```powershell
Test-NetConnection npmmirror.com -Port 443
```

### 使用代理

如果有 VPN 或代理：

```powershell
$env:HTTP_PROXY = "http://127.0.0.1:7890"
$env:HTTPS_PROXY = "http://127.0.0.1:7890"
npm run electron:build:win
```

### 手动下载 Electron

如果网络问题持续，可以：

1. 访问：https://npmmirror.com/mirrors/electron/v39.1.2/
2. 下载：`electron-v39.1.2-win32-x64.zip`
3. 解压到：`~/.cache/electron/` 目录

## 验证修复

构建成功后，在 `release/` 目录应该能看到：
- `.exe` 安装程序
- `win-unpacked/` 文件夹

